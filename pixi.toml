[project]
name = "bakelite"
channels = ["conda-forge"]
platforms = ["osx-arm64", "osx-64", "linux-64", "win-64"]

[dependencies]
python = ">=3.13"
lark-parser = ">=0.12"
jinja2 = ">=3"
click = ">=8"
black = ">=24"
ruff = ">=0.8"
mypy = ">=1.13"
pytest = ">=8"
pytest-cov = "*"
hatchling = ">=1.25"
python-build = "*"
mkdocs = ">=1.6"
ipython = "*"
pyserial = "*"

[pypi-dependencies]
dataclasses-json = ">=0.5"
pytest-describe = ">=2"
pytest-expecter = ">=3"
bakelite = { path = ".", editable = true }

[tasks]
test = "pytest bakelite --cov=bakelite -vv"
test-cpp = { cmd = "make test", cwd = "bakelite/tests/generator" }
test-all = { depends-on = ["test", "test-cpp"] }
lint = "ruff check bakelite && black --check bakelite && mypy bakelite"
format = "black bakelite && ruff check --fix bakelite"
build = "python -m build"
docs = "mkdocs build --clean --strict"
docs-serve = "mkdocs serve"
